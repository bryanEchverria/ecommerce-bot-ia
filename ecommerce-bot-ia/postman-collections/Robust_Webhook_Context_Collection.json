{
	"info": {
		"_postman_id": "robust-webhook-context-2025",
		"name": " Robust AI Webhook with Context - Complete Collection",
		"description": "Colecci贸n completa para probar el webhook robusto con contexto avanzado, gesti贸n de sesiones, y analytics.\n\n**Caracter铆sticas:**\n- Contexto persistente con SQLite\n- Tracking de intenci贸n de compra\n- Gesti贸n de etapas de conversaci贸n\n- Analytics de sesi贸n en tiempo real\n- Multi-tenant con productos reales\n\n**Endpoints Disponibles:**\n- Webhook Principal (Puerto 9006)\n- Analytics de Sesi贸n\n- Analytics Globales\n- Estado del Sistema",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": " Sistema",
			"item": [
				{
					"name": "Estado del Sistema",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://127.0.0.1:9006/",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": [""]
						},
						"description": "Verifica el estado del sistema de webhook robusto y muestra caracter铆sticas disponibles."
					},
					"response": []
				}
			]
		},
		{
			"name": " Webhook Principal",
			"item": [
				{
					"name": "1锔 Saludo Inicial",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"hola, buenos d铆as\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Primera interacci贸n - establecer sesi贸n y contexto inicial.\n\n**Cliente:** Green House (productos cann谩bicos)\n**Esperado:** Saludo personalizado, creaci贸n de sesi贸n"
					},
					"response": []
				},
				{
					"name": "2锔 B煤squeda de Productos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"que productos tienen disponibles\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "B煤squeda general de productos.\n\n**Esperado:** Lista de productos, stage cambia a 'browsing', intent score incrementa"
					},
					"response": []
				},
				{
					"name": "3锔 Inter茅s en Producto Espec铆fico",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"me interesa el iPhone 15 Pro Max\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Cliente muestra inter茅s espec铆fico.\n\n**Esperado:** Stage 'interested', purchase intent sube significativamente"
					},
					"response": []
				},
				{
					"name": "4锔 Consulta de Precio",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"cu谩nto cuesta exactamente\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Consulta espec铆fica de precio.\n\n**Esperado:** Stage 'negotiating', precio espec铆fico del producto"
					},
					"response": []
				},
				{
					"name": "5锔 Intenci贸n de Compra",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"perfecto, lo quiero comprar\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Cliente declara intenci贸n de compra.\n\n**Esperado:** Stage 'purchasing', purchase intent cerca del 100%"
					},
					"response": []
				},
				{
					"name": "6锔 Confirmaci贸n de Compra",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"s铆, confirmo la compra\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Confirmaci贸n final de compra.\n\n**Esperado:** Proceso de orden, recolecci贸n de datos del cliente"
					},
					"response": []
				}
			]
		},
		{
			"name": " Multi-Tenant Tests",
			"item": [
				{
					"name": "Green House - Productos Cann谩bicos",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"hola, busco semillas de calidad\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**Cliente:** Green House\n**Productos:** 14 disponibles\n**Especialidad:** Productos cann谩bicos y wellness"
					},
					"response": []
				},
				{
					"name": "Demo Company - Tienda General",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+1234567890\",\n  \"mensaje\": \"hola, que productos manejan\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**Cliente:** Demo Company\n**Productos:** 11 disponibles\n**Especialidad:** Tienda general de productos"
					},
					"response": []
				},
				{
					"name": "Mundo Canino - Productos para Mascotas",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+5678901234\",\n  \"mensaje\": \"necesito algo para mi perro\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**Cliente:** Mundo Canino\n**Productos:** 9 disponibles\n**Especialidad:** Todo para mascotas"
					},
					"response": []
				},
				{
					"name": "Test Store - Productos de Calidad",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+9876543210\",\n  \"mensaje\": \"hola, que me recomiendan\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**Cliente:** Test Store\n**Productos:** 6 disponibles\n**Especialidad:** Productos de calidad"
					},
					"response": []
				}
			]
		},
		{
			"name": " Analytics",
			"item": [
				{
					"name": "Analytics de Sesi贸n - Green House",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://127.0.0.1:9006/analytics/session/+3456789012",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["analytics", "session", "+3456789012"]
						},
						"description": "Obtiene analytics detallados de la sesi贸n espec铆fica.\n\n**Informaci贸n incluida:**\n- Estado de conversaci贸n actual\n- Purchase intent score\n- Productos discutidos\n- Duraci贸n de sesi贸n\n- Historial de mensajes recientes"
					},
					"response": []
				},
				{
					"name": "Analytics de Sesi贸n - Demo Company",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://127.0.0.1:9006/analytics/session/+1234567890",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["analytics", "session", "+1234567890"]
						},
						"description": "Analytics para el cliente Demo Company"
					},
					"response": []
				},
				{
					"name": "Analytics Globales del Sistema",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://127.0.0.1:9006/analytics/global",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["analytics", "global"]
						},
						"description": "Estad铆sticas globales del sistema.\n\n**M茅tricas incluidas:**\n- Total de sesiones (煤ltimos 7 d铆as)\n- Promedio de mensajes por sesi贸n\n- Duraci贸n promedio de sesi贸n\n- Compras completadas\n- Tasa de intenci贸n de compra\n- Sesiones activas actuales"
					},
					"response": []
				}
			]
		},
		{
			"name": "И Casos de Prueba Espec铆ficos",
			"item": [
				{
					"name": "Test: Producto No Disponible",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"busco un Tesla Model S\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Prueba c贸mo maneja el sistema productos no disponibles.\n\n**Esperado:** Sugerencia de productos alternativos disponibles"
					},
					"response": []
				},
				{
					"name": "Test: Contexto de Conversaci贸n Larga",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"recordamos que hab铆a preguntado por el precio del iPhone hace un rato\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Prueba la memoria del contexto de conversaciones anteriores.\n\n**Esperado:** Referencia a conversaci贸n previa sobre iPhone"
					},
					"response": []
				},
				{
					"name": "Test: M煤ltiples Productos en Un Mensaje",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"quiero un iPhone, unos AirPods y tambi茅n un MacBook para trabajar\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Prueba el manejo de m煤ltiples productos en una sola consulta.\n\n**Esperado:** Tracking de los 3 productos mencionados"
					},
					"response": []
				},
				{
					"name": "Test: Negociaci贸n de Precio",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789012\",\n  \"mensaje\": \"ese precio est谩 muy caro, tienen alg煤n descuento o promoci贸n\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "Prueba la etapa de negociaci贸n.\n\n**Esperado:** Stage 'negotiating', manejo de objeciones de precio"
					},
					"response": []
				}
			]
		},
		{
			"name": " Flujo Completo de Compra",
			"item": [
				{
					"name": "Paso 1: Nuevo Cliente - Saludo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"hola, buenos d铆as\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 1**\nNuevo cliente inicia conversaci贸n"
					},
					"response": []
				},
				{
					"name": "Paso 2: B煤squeda Inicial",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"estoy buscando un smartphone nuevo\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 2**\nCliente expresa necesidad espec铆fica"
					},
					"response": []
				},
				{
					"name": "Paso 3: Inter茅s Espec铆fico",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"me gusta el Samsung Galaxy S24 Ultra\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 3**\nCliente muestra inter茅s en producto espec铆fico"
					},
					"response": []
				},
				{
					"name": "Paso 4: Consulta Detalles",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"cu谩l es el precio y qu茅 garant铆a incluye\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 4**\nConsulta detalles t茅cnicos y comerciales"
					},
					"response": []
				},
				{
					"name": "Paso 5: Decisi贸n de Compra",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"perfecto, quiero comprarlo\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 5**\nDecisi贸n de compra tomada"
					},
					"response": []
				},
				{
					"name": "Paso 6: Confirmaci贸n Final",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"s铆, confirmo la compra del Samsung Galaxy S24 Ultra\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 6**\nConfirmaci贸n final de la compra"
					},
					"response": []
				},
				{
					"name": "Paso 7: Datos del Cliente",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"telefono\": \"+3456789999\",\n  \"mensaje\": \"mi nombre es Mar铆a Gonz谩lez, direcci贸n: Las Condes 456, Santiago\"\n}"
						},
						"url": {
							"raw": "http://127.0.0.1:9006/webhook",
							"protocol": "http",
							"host": ["127", "0", "0", "1"],
							"port": "9006",
							"path": ["webhook"]
						},
						"description": "**FLUJO COMPLETO - PASO 7**\nRecolecci贸n de datos para la orden"
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:9006",
			"type": "string"
		},
		{
			"key": "green_house_phone",
			"value": "+3456789012",
			"type": "string"
		},
		{
			"key": "demo_company_phone",
			"value": "+1234567890",
			"type": "string"
		},
		{
			"key": "test_customer_phone",
			"value": "+3456789999",
			"type": "string"
		}
	]
}